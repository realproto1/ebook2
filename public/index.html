<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>ë™í™”ì±… ìë™ ìƒì„±ê¸° v13.1</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        .sidebar { min-height: 100vh; position: sticky; top: 0; }
        .card { transition: all 0.3s; }
        .card:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0,0,0,0.15); }
        .page-card { border: 2px solid #e5e7eb; border-radius: 12px; padding: 20px; margin-bottom: 20px; }
        .character-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        .book-item { cursor: pointer; transition: all 0.2s; }
        .book-item:hover { background: #f9fafb; }
        .book-item.active { background: #e0e7ff; border-left: 4px solid #6366f1; }
        .book-item.dragging { opacity: 0.5; }
        .cursor-move { cursor: move; }
        
        /* ì•Œë¦¼ ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fade-in 0.3s ease-out;
            transition: opacity 0.3s ease-out;
        }
        
        /* ì»¤ìŠ¤í…€ ìŠ¤í¬ë¡¤ë°” */
        .overflow-y-auto::-webkit-scrollbar {
            width: 8px;
        }
        .overflow-y-auto::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        .overflow-y-auto::-webkit-scrollbar-thumb {
            background: #a0aec0;
            border-radius: 10px;
        }
        .overflow-y-auto::-webkit-scrollbar-thumb:hover {
            background: #718096;
        }
        
        /* ëª¨ë°”ì¼ ë°˜ì‘í˜• */
        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                left: -100%;
                top: 0;
                width: 80%;
                max-width: 320px;
                z-index: 1000;
                transition: left 0.3s ease-in-out;
                min-height: 100vh;
            }
            .sidebar.mobile-open {
                left: 0;
            }
            .mobile-overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.5);
                z-index: 999;
            }
            .mobile-overlay.active {
                display: block;
            }
            .page-card {
                padding: 12px;
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50">
    <!-- ëª¨ë°”ì¼ ì˜¤ë²„ë ˆì´ -->
    <div class="mobile-overlay" id="mobileOverlay" onclick="closeMobileSidebar()"></div>
    
    <!-- ëª¨ë°”ì¼ í–„ë²„ê±° ë©”ë‰´ -->
    <button 
        onclick="toggleMobileSidebar()"
        class="md:hidden fixed top-4 left-4 z-50 bg-purple-600 text-white p-3 rounded-lg shadow-lg"
        id="hamburgerBtn"
    >
        <i class="fas fa-bars text-xl"></i>
    </button>
    
    <div class="flex">
        <!-- ì™¼ìª½ ì‚¬ì´ë“œë°” -->
        <div class="sidebar w-80 bg-white shadow-2xl overflow-y-auto md:block" id="sidebar">
            <div class="p-6 border-b-2 border-purple-200">
                <h2 class="text-2xl font-bold text-purple-600 mb-4">
                    <i class="fas fa-book mr-2"></i>
                    ë‚´ ë™í™”ì±…
                </h2>
                <button 
                    onclick="showCreateForm()"
                    class="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition"
                >
                    <i class="fas fa-plus mr-2"></i>ìƒˆ ë™í™”ì±… ë§Œë“¤ê¸°
                </button>
            </div>
            
            <div id="bookList" class="p-4">
                <!-- ë™í™”ì±… ë¦¬ìŠ¤íŠ¸ -->
            </div>
        </div>

        <!-- ë©”ì¸ ì½˜í…ì¸  -->
        <div class="flex-1 p-4 md:p-8">
            <!-- í—¤ë” -->
            <div class="text-center mb-6 md:mb-8">
                <div class="flex justify-between items-start mb-4">
                    <div></div>
                    <div class="flex-1">
                        <h1 class="text-2xl md:text-3xl lg:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 mb-2">
                            <i class="fas fa-book-open mr-2 md:mr-3"></i>
                            ë™í™”ì±… ìë™ ìƒì„±ê¸°
                        </h1>
                        <p class="text-gray-600 text-sm md:text-lg">AIê°€ ë§Œë“¤ì–´ì£¼ëŠ” ì™„ë²½í•œ ë™í™”ì±…</p>
                    </div>
                    <button 
                        onclick="openSettings()"
                        class="bg-gray-600 text-white px-3 md:px-4 py-2 rounded-lg hover:bg-gray-700 transition text-sm md:text-base"
                        title="ì´ë¯¸ì§€ ìƒì„± ì„¤ì •"
                    >
                        <i class="fas fa-cog mr-1 md:mr-2"></i><span class="hidden sm:inline">ì„¤ì •</span><span class="sm:hidden">ì„¤ì •</span>
                    </button>
                </div>
            </div>

            <!-- ë™í™”ì±… ìƒì„± í¼ -->
            <div id="createForm" class="bg-white rounded-3xl shadow-2xl p-4 md:p-10 mb-8">
                <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-4 md:mb-8">
                    <i class="fas fa-magic mr-2 text-purple-500"></i>
                    ìƒˆ ë™í™”ì±… ë§Œë“¤ê¸°
                </h2>
                
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-8">
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">
                            <i class="fas fa-heading mr-2"></i>ë™í™”ì±… ì œëª©
                        </label>
                        <input 
                            type="text" 
                            id="bookTitle" 
                            placeholder="ì˜ˆ: ìš©ê°í•œ í† ë¼ì˜ ëª¨í—˜"
                            class="w-full px-4 py-3 border-2 border-purple-300 rounded-lg focus:outline-none focus:border-purple-500"
                        />
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">
                            <i class="fas fa-child mr-2"></i>íƒ€ê²Ÿ ì—°ë ¹
                        </label>
                        <select id="targetAge" class="w-full px-4 py-3 border-2 border-purple-300 rounded-lg focus:outline-none focus:border-purple-500">
                            <option value="4">ë§Œ 4ì„¸ (ë§¤ìš° ì‰¬ìš´ ë‚´ìš©)</option>
                            <option value="5" selected>ë§Œ 5ì„¸ (ê¶Œì¥ â­)</option>
                            <option value="6">ë§Œ 6ì„¸ (í‘œì¤€)</option>
                            <option value="7">ë§Œ 7ì„¸ (ì‹¬í™”)</option>
                            <option value="8">ë§Œ 8ì„¸ (ê³ ê¸‰)</option>
                        </select>
                        <p class="text-xs text-gray-500 mt-1">
                            <span class="font-semibold">4ì„¸:</span> 12í˜ì´ì§€, 800-1200ì | 
                            <span class="font-semibold">5ì„¸:</span> 20í˜ì´ì§€, 2000-3000ì | 
                            <span class="font-semibold">8ì„¸:</span> 32í˜ì´ì§€, 4000-5500ì
                        </p>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">
                            <i class="fas fa-file-alt mr-2"></i>ì´ í˜ì´ì§€ ìˆ˜
                        </label>
                        <input 
                            type="number" 
                            id="totalPages" 
                            value="0"
                            min="0"
                            max="30"
                            placeholder="0 (AI ìë™ ê²°ì •)"
                            class="w-full px-4 py-3 border-2 border-purple-300 rounded-lg focus:outline-none focus:border-purple-500"
                        />
                        <p class="text-xs text-gray-500 mt-1">0 = AIê°€ ìë™ ê²°ì • | 1-30 = ì§ì ‘ ì§€ì •</p>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">
                            <i class="fas fa-brain mr-2"></i>AI ëª¨ë¸
                        </label>
                        <select id="geminiModel" class="w-full px-4 py-3 border-2 border-purple-300 rounded-lg focus:outline-none focus:border-purple-500">
                            <option value="gemini-3-pro-preview" selected>Gemini 3 Pro (ìµœê³  í’ˆì§ˆ â­)</option>
                            <option value="gemini-2.5-flash">Gemini 2.5 Flash (ìµœê³  ê°€ì„±ë¹„ ğŸ’°)</option>
                            <option value="gemini-2.5-pro">Gemini 2.5 Pro (ê· í˜•ì¡íŒ ì„±ëŠ¥ ğŸ¯)</option>
                            <option value="gemini-2.5-flash-lite">Gemini 2.5 Flash Lite (ìµœì € ë¹„ìš© ğŸ’¸)</option>
                        </select>
                        <p class="text-xs text-gray-500 mt-1">
                            <span class="font-semibold">Pro:</span> ìµœê³  í’ˆì§ˆ | 
                            <span class="font-semibold">Flash:</span> ë¹ ë¥´ê³  ì €ë ´ | 
                            <span class="font-semibold">Lite:</span> ëŒ€ëŸ‰ ìƒì„±ìš©
                        </p>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">
                            <i class="fas fa-palette mr-2"></i>ê·¸ë¦¼ì²´
                        </label>
                        <select id="artStyleSelect" onchange="handleArtStyleChange()" class="w-full px-4 py-3 border-2 border-purple-300 rounded-lg focus:outline-none focus:border-purple-500 mb-2">
                            <option value="Botticelli style Renaissance painting" selected>ë³´í‹°ì²¼ë¦¬ ìŠ¤íƒ€ì¼</option>
                            <option value="Raphael style Renaissance art">ë¼íŒŒì—˜ë¡œ ìŠ¤íƒ€ì¼</option>
                            <option value="Gustave DorÃ© engraving style">ê·€ìŠ¤íƒ€ë¸Œ ë„ë ˆ ìŠ¤íƒ€ì¼</option>
                            <option value="Modern Illustration">í˜„ëŒ€ ì¼ëŸ¬ìŠ¤íŠ¸ë ˆì´ì…˜</option>
                            <option value="Clay animation style stop motion">í´ë ˆì´ ì• ë‹ˆë©”ì´ì…˜ ìŠ¤íƒ€ì¼</option>
                            <option value="Simple watercolor painting">ë‹¨ìˆœ ìˆ˜ì±„í™” ìŠ¤íƒ€ì¼</option>
                            <option value="Paper art cutout style">ì¢…ì´ ì•„íŠ¸ ìŠ¤íƒ€ì¼</option>
                            <option value="Studio Ghibli anime style">ì§€ë¸Œë¦¬ ìŠ¤íƒ€ì¼</option>
                            <option value="Pixar 3D animation style">í”½ì‚¬ 3D ìŠ¤íƒ€ì¼</option>
                            <option value="Traditional storybook illustration">ì „í†µ ë™í™”ì±… ìŠ¤íƒ€ì¼</option>
                            <option value="custom">ì§ì ‘ ì…ë ¥ âœï¸</option>
                        </select>
                        <input 
                            type="text" 
                            id="artStyleCustom" 
                            placeholder="ì›í•˜ëŠ” ê·¸ë¦¼ì²´ë¥¼ ì˜ì–´ë¡œ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: Pixar style 3D animation)"
                            class="hidden w-full px-4 py-3 border-2 border-purple-300 rounded-lg focus:outline-none focus:border-purple-500"
                        />
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">
                            <i class="fas fa-robot mr-2"></i>ì´ë¯¸ì§€ AI ëª¨ë¸
                        </label>
                        <select id="imageModelSelect" class="w-full px-4 py-3 border-2 border-purple-300 rounded-lg focus:outline-none focus:border-purple-500">
                            <option value="gemini-3-pro-image-preview" selected>Nano Banana Pro (Gemini 3 Pro Image) - ìµœê³  í’ˆì§ˆ â­</option>
                            <option value="gemini-2.0-flash-exp">Gemini 2.0 Flash - ë¹ ë¥´ê³  íš¨ìœ¨ì  âš¡</option>
                            <option value="gemini-2.5-flash-preview-04">Gemini 2.5 Flash Preview - ìµœì‹  ê¸°ëŠ¥ ğŸ†•</option>
                            <option value="gemini-1.5-flash">Gemini 1.5 Flash - ì•ˆì •ì  âœ…</option>
                            <option value="gemini-1.5-pro">Gemini 1.5 Pro - ê³ í’ˆì§ˆ ğŸ’</option>
                        </select>
                        <p class="text-xs text-gray-500 mt-1">
                            <span class="font-semibold">Nano Banana Pro:</span> ìµœê³  ì´ë¯¸ì§€ í’ˆì§ˆ (ê¶Œì¥) | 
                            <span class="font-semibold">2.0 Flash:</span> ë¹ ë¥¸ ìƒì„± | 
                            <span class="font-semibold">1.5 Pro:</span> ë³µì¡í•œ ì´ë¯¸ì§€
                        </p>
                    </div>
                </div>
                
                <div class="mb-8">
                    <label class="block text-gray-700 font-semibold mb-2">
                        <i class="fas fa-book-open mr-2"></i>ì°¸ê³ í•  ë™í™” ë‚´ìš© (ì„ íƒì‚¬í•­)
                    </label>
                    <textarea 
                        id="referenceContent" 
                        placeholder="ì°¸ê³ í•  ë™í™”ì˜ ì¤„ê±°ë¦¬ë‚˜ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”. ë¹„ì›Œë‘ë©´ ì œëª©ë§Œìœ¼ë¡œ ìƒˆë¡œìš´ ì´ì•¼ê¸°ë¥¼ ë§Œë“­ë‹ˆë‹¤."
                        class="w-full px-4 py-3 border-2 border-purple-300 rounded-lg focus:outline-none focus:border-purple-500"
                        rows="5"
                    ></textarea>
                    <p class="text-sm text-gray-500 mt-2">
                        <i class="fas fa-info-circle mr-1"></i>
                        ê¸°ì¡´ ë™í™”ë¥¼ ì¬í•´ì„í•˜ê±°ë‚˜ ì°¸ê³ í•˜ë ¤ë©´ ì—¬ê¸°ì— ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”.
                    </p>
                </div>

                <button 
                    onclick="generateStorybook()"
                    class="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-4 rounded-xl font-bold text-xl hover:from-purple-700 hover:to-pink-700 transition-all transform hover:scale-105 shadow-lg"
                >
                    <i class="fas fa-wand-magic-sparkles mr-2"></i>
                    ë™í™”ì±… ìƒì„±í•˜ê¸°
                </button>
            </div>

            <!-- ë¡œë”© -->
            <div id="loading" class="hidden text-center py-16">
                <div class="inline-block animate-spin rounded-full h-24 w-24 border-b-4 border-purple-600"></div>
                <p class="text-gray-700 mt-6 text-xl font-semibold">AIê°€ ë™í™”ì±…ì„ ë§Œë“¤ê³  ìˆì–´ìš”... âœ¨</p>
                <p class="text-gray-500 mt-2">ìŠ¤í† ë¦¬, ìºë¦­í„°, í˜ì´ì§€ë¥¼ ìƒì„± ì¤‘ì…ë‹ˆë‹¤.</p>
            </div>

            <!-- ë™í™”ì±… ê²°ê³¼ -->
            <div id="storybookResult" class="hidden">
                <!-- ë™ì ìœ¼ë¡œ ê²°ê³¼ í‘œì‹œ -->
            </div>
        </div>
    </div>

    <!-- ì„¤ì • ëª¨ë‹¬ -->
    <div id="settingsModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4" onclick="closeSettings(event)">
        <div class="bg-white rounded-2xl shadow-2xl p-4 md:p-8 max-w-3xl w-full max-h-[90vh] overflow-y-auto" onclick="event.stopPropagation()">
            <div class="flex justify-between items-center mb-4 md:mb-6">
                <h2 class="text-xl md:text-3xl font-bold text-gray-800">
                    <i class="fas fa-cog mr-2 text-purple-600"></i>
                    ì´ë¯¸ì§€ ìƒì„± ì„¤ì •
                </h2>
                <button onclick="closeSettings()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-xl md:text-2xl"></i>
                </button>
            </div>

            <div class="space-y-6">
                <!-- Gemini API í‚¤ ì„¤ì • -->
                <div class="bg-indigo-50 p-4 rounded-lg border-2 border-indigo-200">
                    <label class="block text-gray-800 font-bold mb-2">
                        <i class="fas fa-key mr-2 text-indigo-600"></i>Gemini API í‚¤
                    </label>
                    <div class="space-y-2">
                        <input 
                            type="password" 
                            id="geminiApiKey" 
                            class="w-full px-4 py-2 border-2 border-indigo-300 rounded-lg font-mono text-sm"
                            placeholder="AIzaSy... (ë¹„ì›Œë‘ë©´ ê¸°ë³¸ í‚¤ ì‚¬ìš©)"
                        />
                        <div class="flex items-start gap-2 text-xs text-gray-600">
                            <i class="fas fa-info-circle mt-0.5 text-indigo-500"></i>
                            <div>
                                <p class="mb-1">â€¢ ë¹„ì›Œë‘ë©´ ê¸°ë³¸ ì œê³µ API í‚¤ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
                                <p class="mb-1">â€¢ ê°œì¸ API í‚¤ ì‚¬ìš© ì‹œ í• ë‹¹ëŸ‰ ì œí•œ ì—†ì´ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
                                <p>â€¢ API í‚¤ëŠ” ë¸Œë¼ìš°ì €ì—ë§Œ ì €ì¥ë˜ë©° ì„œë²„ë¡œ ì „ì†¡ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
                            </div>
                        </div>
                        <a 
                            href="https://aistudio.google.com/app/apikey" 
                            target="_blank"
                            class="inline-flex items-center gap-2 text-indigo-600 hover:text-indigo-800 text-sm font-semibold"
                        >
                            <i class="fas fa-external-link-alt"></i>
                            Google AI Studioì—ì„œ API í‚¤ ë°œê¸‰ë°›ê¸°
                        </a>
                    </div>
                </div>

                <!-- ì´ë¯¸ì§€ ë¹„ìœ¨ -->
                <div class="bg-purple-50 p-4 rounded-lg">
                    <label class="block text-gray-800 font-bold mb-2">
                        <i class="fas fa-expand-arrows-alt mr-2"></i>ì´ë¯¸ì§€ ë¹„ìœ¨
                    </label>
                    <select id="imageAspectRatio" class="w-full px-4 py-2 border-2 border-purple-300 rounded-lg">
                        <option value="1:1">1:1 (ì •ì‚¬ê°í˜•)</option>
                        <option value="4:3">4:3 (ê°€ë¡œ)</option>
                        <option value="16:9" selected>16:9 (ì™€ì´ë“œ ê°€ë¡œ)</option>
                        <option value="3:4">3:4 (ì„¸ë¡œ)</option>
                        <option value="9:16">9:16 (ì„¸ë¡œ)</option>
                    </select>
                    <p class="text-sm text-gray-600 mt-2">ì‚½í™”ì˜ ê¸°ë³¸ ê°€ë¡œì„¸ë¡œ ë¹„ìœ¨ì…ë‹ˆë‹¤.</p>
                </div>

                <!-- í…ìŠ¤íŠ¸ ì œê±° ê°•ì¡° -->
                <div class="bg-pink-50 p-4 rounded-lg">
                    <label class="flex items-center mb-2">
                        <input type="checkbox" id="enforceNoText" checked class="mr-3 w-5 h-5">
                        <span class="text-gray-800 font-bold">
                            <i class="fas fa-ban mr-2"></i>ì´ë¯¸ì§€ ë‚´ í…ìŠ¤íŠ¸ ì œê±° ê°•ì¡°
                        </span>
                    </label>
                    <p class="text-sm text-gray-600">í”„ë¡¬í”„íŠ¸ì— "NO TEXT, NO WORDS, NO LETTERS" ê°•ì¡°ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.</p>
                </div>

                <!-- ìºë¦­í„° ì¼ê´€ì„± ê°•ì¡° -->
                <div class="bg-blue-50 p-4 rounded-lg">
                    <label class="flex items-center mb-2">
                        <input type="checkbox" id="enforceCharacterConsistency" checked class="mr-3 w-5 h-5">
                        <span class="text-gray-800 font-bold">
                            <i class="fas fa-user-check mr-2"></i>ìºë¦­í„° ì¼ê´€ì„± ê°•ì¡°
                        </span>
                    </label>
                    <p class="text-sm text-gray-600">í”„ë¡¬í”„íŠ¸ì— "PIXEL-PERFECT accuracy" ê°•ì¡°ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.</p>
                </div>

                <!-- ì¶”ê°€ í”„ë¡¬í”„íŠ¸ -->
                <div class="bg-green-50 p-4 rounded-lg">
                    <label class="block text-gray-800 font-bold mb-2">
                        <i class="fas fa-plus-circle mr-2"></i>ì¶”ê°€ í”„ë¡¬í”„íŠ¸
                    </label>
                    <textarea 
                        id="additionalPrompt" 
                        class="w-full px-4 py-2 border-2 border-green-300 rounded-lg"
                        rows="3"
                        placeholder="ëª¨ë“  ì´ë¯¸ì§€ ìƒì„± ì‹œ ì¶”ê°€ë¡œ í¬í•¨í•  í”„ë¡¬í”„íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                    ></textarea>
                </div>

                <!-- ì´ë¯¸ì§€ AI ëª¨ë¸ ì„ íƒ -->
                <div class="bg-indigo-50 p-4 rounded-lg border-2 border-indigo-200">
                    <label class="block text-gray-800 font-bold mb-4">
                        <i class="fas fa-robot mr-2 text-indigo-600"></i>ì´ë¯¸ì§€ AI ëª¨ë¸ ì„ íƒ
                    </label>
                    
                    <!-- ìºë¦­í„° ë ˆí¼ëŸ°ìŠ¤ ëª¨ë¸ -->
                    <div class="mb-4">
                        <label class="block text-sm font-semibold text-gray-700 mb-1">
                            <i class="fas fa-users mr-2 text-purple-500"></i>ìºë¦­í„° ë ˆí¼ëŸ°ìŠ¤
                        </label>
                        <select id="characterModelSelect" class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg text-sm">
                            <option value="gemini-3-pro-image-preview" selected>Nano Banana Pro (Gemini 3 Pro) â­</option>
                            <option value="gemini-2.5-flash-image">Gemini 2.5 Flash Image</option>
                            <option value="gemini-2.0-flash-exp">Gemini 2.0 Flash (ì‹¤í—˜)</option>
                            <option value="imagen-4">Imagen 4</option>
                        </select>
                    </div>
                    
                    <!-- Key Object ëª¨ë¸ -->
                    <div class="mb-4">
                        <label class="block text-sm font-semibold text-gray-700 mb-1">
                            <i class="fas fa-cube mr-2 text-orange-500"></i>Key Objects (í•µì‹¬ ì‚¬ë¬¼)
                        </label>
                        <select id="keyObjectModelSelect" class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg text-sm">
                            <option value="gemini-3-pro-image-preview" selected>Nano Banana Pro (Gemini 3 Pro) â­</option>
                            <option value="gemini-2.5-flash-image">Gemini 2.5 Flash Image</option>
                            <option value="gemini-2.0-flash-exp">Gemini 2.0 Flash (ì‹¤í—˜)</option>
                            <option value="imagen-4">Imagen 4</option>
                        </select>
                    </div>
                    
                    <!-- í˜ì´ì§€ ì‚½í™” ëª¨ë¸ -->
                    <div class="mb-4">
                        <label class="block text-sm font-semibold text-gray-700 mb-1">
                            <i class="fas fa-images mr-2 text-blue-500"></i>í˜ì´ì§€ ì‚½í™”
                        </label>
                        <select id="illustrationModelSelect" class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg text-sm">
                            <option value="gemini-3-pro-image-preview" selected>Nano Banana Pro (Gemini 3 Pro) â­</option>
                            <option value="gemini-2.5-flash-image">Gemini 2.5 Flash Image</option>
                            <option value="gemini-2.0-flash-exp">Gemini 2.0 Flash (ì‹¤í—˜)</option>
                            <option value="imagen-4">Imagen 4</option>
                        </select>
                    </div>
                    
                    <!-- 8ë‹¨ì–´ í•™ìŠµ ëª¨ë¸ -->
                    <div class="mb-4">
                        <label class="block text-sm font-semibold text-gray-700 mb-1">
                            <i class="fas fa-language mr-2 text-green-500"></i>8ë‹¨ì–´ í•™ìŠµ
                        </label>
                        <select id="vocabularyModelSelect" class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg text-sm">
                            <option value="gemini-3-pro-image-preview" selected>Nano Banana Pro (Gemini 3 Pro) â­</option>
                            <option value="gemini-2.5-flash-image">Gemini 2.5 Flash Image</option>
                            <option value="gemini-2.0-flash-exp">Gemini 2.0 Flash (ì‹¤í—˜)</option>
                            <option value="imagen-4">Imagen 4</option>
                        </select>
                    </div>
                    
                    <div class="flex items-start gap-2 text-xs text-gray-600 mt-3 bg-white p-3 rounded">
                        <i class="fas fa-info-circle mt-0.5 text-indigo-500"></i>
                        <div>
                            <p class="mb-1"><strong>Nano Banana Pro:</strong> Gemini 3 Pro Image Preview - ë„¤ì´í‹°ë¸Œ ì´ë¯¸ì§€ ìƒì„±, ìµœê³  í’ˆì§ˆ (í˜„ì¬ ì‚¬ìš© ì¤‘)</p>
                            <p class="mb-1"><strong>Gemini 2.5 Flash Image:</strong> ë¹ ë¥´ê³  ì €ë ´í•œ ì´ë¯¸ì§€ ìƒì„± ($0.039/ì´ë¯¸ì§€)</p>
                            <p class="mb-1"><strong>Gemini 2.0 Flash:</strong> ë¬´ë£Œ í…ŒìŠ¤íŠ¸ìš©, í…ìŠ¤íŠ¸+ì´ë¯¸ì§€ í†µí•©</p>
                            <p><strong>Imagen 4:</strong> ì „ë¬¸ ì´ë¯¸ì§€ ìƒì„±, í…ìŠ¤íŠ¸ ë Œë”ë§ ìš°ìˆ˜</p>
                        </div>
                    </div>
                </div>

                <!-- ì´ë¯¸ì§€ í’ˆì§ˆ -->
                <div class="bg-yellow-50 p-4 rounded-lg">
                    <label class="block text-gray-800 font-bold mb-2">
                        <i class="fas fa-star mr-2"></i>ì´ë¯¸ì§€ í’ˆì§ˆ
                    </label>
                    <select id="imageQuality" class="w-full px-4 py-2 border-2 border-yellow-300 rounded-lg">
                        <option value="standard">í‘œì¤€</option>
                        <option value="high" selected>ê³ í’ˆì§ˆ (ê¶Œì¥)</option>
                    </select>
                </div>
            </div>

            <div class="flex gap-4 mt-8">
                <button 
                    onclick="saveSettings()"
                    class="flex-1 bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg font-bold hover:from-purple-700 hover:to-pink-700 transition"
                >
                    <i class="fas fa-save mr-2"></i>ì €ì¥
                </button>
                <button 
                    onclick="resetSettings()"
                    class="flex-1 bg-gray-500 text-white py-3 rounded-lg font-bold hover:bg-gray-600 transition"
                >
                    <i class="fas fa-undo mr-2"></i>ê¸°ë³¸ê°’ìœ¼ë¡œ ë³µì›
                </button>
            </div>
        </div>
    </div>

    <!-- ë‹¤ì‹œ ë§Œë“¤ê¸° ëª¨ë‹¬ -->
    <div id="regenerateModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4" onclick="if(event.target === this) closeRegenerateModal()">
        <div class="bg-white rounded-3xl shadow-2xl max-w-2xl w-full p-4 md:p-8" onclick="event.stopPropagation()">
            <h2 class="text-2xl md:text-3xl font-bold text-purple-600 mb-4 md:mb-6">
                <i class="fas fa-redo mr-2"></i>ë™í™”ì±… ë‹¤ì‹œ ë§Œë“¤ê¸°
            </h2>
            
            <div class="space-y-4 mb-6">
                <div>
                    <label class="block text-gray-700 font-semibold mb-2">
                        <i class="fas fa-heading mr-2"></i>ì œëª©
                    </label>
                    <input 
                        type="text" 
                        id="regenerateTitle" 
                        class="w-full px-4 py-3 border-2 border-purple-300 rounded-lg focus:outline-none focus:border-purple-500"
                    />
                </div>
                
                <div>
                    <label class="block text-gray-700 font-semibold mb-2">
                        <i class="fas fa-child mr-2"></i>íƒ€ê²Ÿ ì—°ë ¹
                    </label>
                    <select id="regenerateAge" class="w-full px-4 py-3 border-2 border-purple-300 rounded-lg focus:outline-none focus:border-purple-500">
                        <option value="4">ë§Œ 4ì„¸ (ë§¤ìš° ì‰¬ìš´ ë‚´ìš©)</option>
                        <option value="5">ë§Œ 5ì„¸ (ê¶Œì¥)</option>
                        <option value="6">ë§Œ 6ì„¸ (í‘œì¤€)</option>
                        <option value="7">ë§Œ 7ì„¸ (ì‹¬í™”)</option>
                        <option value="8">ë§Œ 8ì„¸ (ê³ ê¸‰)</option>
                    </select>
                </div>
                
                <div>
                    <label class="block text-gray-700 font-semibold mb-2">
                        <i class="fas fa-file-alt mr-2"></i>ì´ í˜ì´ì§€ ìˆ˜
                    </label>
                    <input 
                        type="number" 
                        id="regeneratePages" 
                        min="5"
                        max="20"
                        class="w-full px-4 py-3 border-2 border-purple-300 rounded-lg focus:outline-none focus:border-purple-500"
                    />
                </div>
                
                <div>
                    <label class="block text-gray-700 font-semibold mb-2">
                        <i class="fas fa-brain mr-2"></i>AI ëª¨ë¸
                    </label>
                    <select id="regenerateModel" class="w-full px-4 py-3 border-2 border-purple-300 rounded-lg focus:outline-none focus:border-purple-500">
                        <option value="gemini-3-pro-preview" selected>Gemini 3 Pro (ìµœê³  í’ˆì§ˆ â­)</option>
                        <option value="gemini-2.5-flash">Gemini 2.5 Flash (ìµœê³  ê°€ì„±ë¹„ ğŸ’°)</option>
                        <option value="gemini-2.5-pro">Gemini 2.5 Pro (ê· í˜•ì¡íŒ ì„±ëŠ¥ ğŸ¯)</option>
                        <option value="gemini-2.5-flash-lite">Gemini 2.5 Flash Lite (ìµœì € ë¹„ìš© ğŸ’¸)</option>
                    </select>
                </div>
                
                <div>
                    <label class="block text-gray-700 font-semibold mb-2">
                        <i class="fas fa-palette mr-2"></i>ê·¸ë¦¼ì²´
                    </label>
                    <input 
                        type="text" 
                        id="regenerateArtStyle" 
                        class="w-full px-4 py-3 border-2 border-purple-300 rounded-lg focus:outline-none focus:border-purple-500"
                    />
                </div>
                
                <div>
                    <label class="block text-gray-700 font-semibold mb-2">
                        <i class="fas fa-edit mr-2"></i>ìˆ˜ì • ìš”ì²­ì‚¬í•­
                    </label>
                    <textarea 
                        id="regenerateNotes" 
                        class="w-full px-4 py-3 border-2 border-purple-300 rounded-lg focus:outline-none focus:border-purple-500"
                        rows="4"
                        placeholder="ì˜ˆ: ë§íˆ¬ë¥¼ ë” ë¶€ë“œëŸ½ê²Œ, ëª¨í—˜ ìš”ì†Œë¥¼ ë” ê°•ì¡°, ê²°ë§ì„ í•´í”¼ì—”ë”©ìœ¼ë¡œ..."
                    ></textarea>
                    <p class="text-sm text-gray-500 mt-2">
                        <i class="fas fa-info-circle mr-1"></i>
                        ìˆ˜ì •í•˜ê³  ì‹¶ì€ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”. ìºë¦­í„°ëŠ” ìœ ì§€ë˜ê³  ìŠ¤í† ë¦¬ë§Œ ì¬ìƒì„±ë©ë‹ˆë‹¤.
                    </p>
                </div>
            </div>
            
            <div class="flex gap-4">
                <button 
                    onclick="executeRegenerate()"
                    class="flex-1 bg-gradient-to-r from-orange-500 to-red-500 text-white py-3 rounded-lg font-bold hover:from-orange-600 hover:to-red-600 transition"
                >
                    <i class="fas fa-redo mr-2"></i>ë‹¤ì‹œ ë§Œë“¤ê¸°
                </button>
                <button 
                    onclick="closeRegenerateModal()"
                    class="flex-1 bg-gray-500 text-white py-3 rounded-lg font-bold hover:bg-gray-600 transition"
                >
                    <i class="fas fa-times mr-2"></i>ì·¨ì†Œ
                </button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/axios@1.6.0/dist/axios.min.js"></script>
    <script src="/gemini-client.js?v=20250120-06"></script>
    <script src="/app.js?v=20250120-06"></script>
</body>
</html>
